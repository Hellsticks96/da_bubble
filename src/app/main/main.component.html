<app-header></app-header>
<main>
  <mat-drawer-container autosize>
    <mat-drawer #conversationsDrawer opened="true" mode="side">
      <app-conversations (user)="selectedUserForDM($event)" (openDM)="chatService.setComponent($event)"></app-conversations>
    </mat-drawer>
  </mat-drawer-container>
  <button class="menu-button" type="button" [ngClass]="{'closed': !showMenu}" mat-button
    (click)="conversationsDrawer.toggle(); showMenu = !showMenu">
    @if(showMenu) {
    <span name="Workspace-Menü schließen ">Workspace-Menü schließen </span><img
      src="../../assets/img/icons/sidenav-close.svg">
    } @else {
    <span name="Workspace-Menü öffen ">Workspace-Menü öffen </span><img src="../../assets/img/icons/sidenav-open.svg">
    }
  </button>
    @switch (chatService.openComponent) {

    @default{
      <app-welcome-screen></app-welcome-screen>
     }

     @case ('chat') {
      <app-chat (threadDrawer)="threadDrawer" (threadOpen)="openThread()"></app-chat>
      <mat-drawer-container autosize>
        <mat-drawer #threadDrawer opened="false" mode="side">
          <app-thread (threadClose)="closeThread()"></app-thread>
        </mat-drawer>
      </mat-drawer-container>
     }

     @case ('directMessage') {
      <app-direct-message [sendedUser]="selectedUser"></app-direct-message>
     }

     @case ('newMessage') {
      <app-new-message ></app-new-message>
     }
    }
</main>
<app-conversations class="mobile">
</app-conversations>
<button mat-flat-button class="new-dm mobile" type="submit" (click)="openComponent('newMessage')"><img src="../../assets/img/icons/edit_square-white.svg"></button>
